#!/bin/bash

### TOOLS
brew upgrade
brew install --cask wezterm
brew install \
    nvim \
    ripgrep \
    lazygit \
    tmux \
    wget \
    node \
    fsouza/prettierd/prettierd \
    go \
    codespell

brew install \
    mysql-client \
    libpq \
    redis

brew link --force libpq

mkdir "$HOME/.npm-global"
npm config set prefix "$HOME/.npm-global"

chmod -R +x $HOME/.config/bin

### ZSH
tee -a $HOME/.zshrc << EOF
### AUTO-GENERATED BY \$HOME/.config/setup ###
source \$HOME/.config/zsh/env
source \$HOME/.config/zsh/alias
### DO NOT EDIT ###
EOF

### GIT
tee -a $HOME/.gitconfig << EOF
[include]
    path = $HOME/.config/git/alias
EOF

wget -O $HOME/.local/bin/helm_ls https://github.com/mrjosh/helm-ls/releases/download/master/helm_ls_darwin_amd64
chmod +x $HOME/.local/bin/helm_ls

npm i -g \
  vscode-langservers-extracted \
  textlint \
  textlint-rule-write-good \
  textlint-rule-en-spell

go install \
  github.com/katbyte/terrafmt@latest \
  mvdan.cc/gofumpt@latest

curl -sS https://webi.sh/shfmt | sh
